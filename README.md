# 基于0-1背包算法的排产算法
本项目基于01背包算法进行了排产项目的规划，项目要求与数据详见**”大作业数据“**文件，关于**01背包算法**可以参考我的中期展示，或者上网搜索

总之01背包是一个很好的**防止贪心算法落入次优解**的算法，对于限定最大总量，进行每一道次的编排特别有用

我分别为这5个案例新建了项目，分别利用上述算法与中期展示的代码结构做了实验，因为有到货日期与模板数量的影响，所以我人为限制了**不同的到货批次来与每个批次的每个砖每天的最大生产量**来解决问题，同时还需要考虑RL砖型，所以一致假设：**先产完R型砖才能产L型砖**

```c++
	int First_batch = 6;
	int First_batch_day = 6;
	int Second_batch = 0;
	int Second_batch_day = 0;
	int Third_batch = 0;
	int Third_batch_day = 0;
	int Fourth_batch = 0;
	int Fourth_batch_day = 6;
	int Fifth_batch = 22;
	int Fifth_batch_day = day;

	int maxnum1 = 1;
	int maxnum2 = 2;
```

```c++
void paichan::getprice(int n)
{
    for (int i = 0; i < n; i++)
    {
        if (bricks[i].type[4] == 'R' && bricks[i].left_number <= 0)
        {
            bricks[i - 1].flag = 1;
        }
    }
    for (int i = 0; i < n; i++)
    {
        bricks[i].price = bricks[i].left_number * bricks[i].flag;
    }
}
```



最后会输出两个txt文件，分别是每一道次的安排(图片中的内容)epoch.txt与正式表格中的内容arrangement.txt（~~因为c++输出的局限性，所以需要把txt文件翻转180度在转置一下就是表格的内容😣~~），下面让我讲一下我的排产与真实数据的差异与理由

## 1.唐钢中厚板3#炉陶瓷杯项目

这个项目就是老师一开始给我们的数据，我的最初算法实验都是参照这个数据实验的，调了一堆bug😢，最后成功产生了数据

效果还不错，我自己写的代码与真实数据的总生产时间是一样的，大部分砖的编排与表格一致，但是也有些许不同

1.我的项目合”1“为”2“了，合”2“为”4“了，就是有的砖会连续每天产1或2块，但是在这些天产2或4块也是符合要求的，我认为是因为有其他项目联合排产的结果，但是说不考虑多个项目排产了，所以这种不同是可以接受的

2.有数量很多的砖会为其他数量少的砖"让路"，这是一个反常的情况，因为常理来说就应该优先照顾数量多的砖，但是这就是**贪心算法的”短视“造成的次优解弊端**，因为我的每一道次的编排都是基于最优价值的（价值就是当前每个砖的剩余数量），可以保证每次都是在重量限制下的最优排产方案，虽然与常理不同，但是**人脑的主观最优是比不上计算机的全局观的**，所以我认为我的结果是**优于人工的**

## 2.建龙5#高炉陶瓷杯项目

数据量类似于上个项目，我自己做的天数仍然与人工排产相同，观察表格发现，每天的产砖数都是1-2的，所以这个项目的模具是不多的，没有出现双打规则的第二项：一种砖用两个模具可以产四块，而且也没有出现数量很大的砖

问题仍然是合”1“为”2“，其他都与表格数据一样

## 3.凌源5#高炉陶瓷杯项目

这组数据量多于第一个数据，而且模具关系有点复杂，所以差别有点大，我自己做的天数比人工排产的少6天

分析一下，不难知道总天数取决于最多数量的砖种类，观察一下较多数量的砖种类，发现这些砖并不是每天都产4个，甚至有些砖每天只产了1个，最后才加紧产完，所以这导致了工期变长，但是原因有很多，有其他项目混产的影响，还有砖的模具数量本来不足无法双打等，因为我的算法**没有考虑给每个砖的特定模具数量**（~~实际上完全可以给，但是感觉有点凑答案~~），所以如果每个砖有特定的模具限制，人工排产的应该更好，如果是这个之外的原因就是我的排产更好了，所以需要根据原因来判断哪个更好

其他问题依旧是上面提到的，同时也出现了”让路“情况，更加验证了正确性

## 4.淮钢6高炉陶瓷杯项目

这个项目是让我最头疼的一个项目，不是因为里面的砖数量，而是在这个项目了我发现了一个一直都没解决的bug，就是有些砖的剩余数量如果不是2或4的整数倍，会出现负值（感谢调试！！！🙏），经历了一番波折解决了这个bug，为了纪念，我将新加入的输入每个砖的重量数量的功能的测试数据就是这个项目的。输入数据可以在”**大作业数据“**文件里看到，可供调试。

说回正题，这个我排产的结果比人工排产的少了7天，依旧是和第三个一样的原因，需要根据实际情况判断哪个更好，其他砖的结果和人工排产一样

## 5.敬业B高炉陶瓷杯项目

这个项目是砖数最小的项目，模具数量也应该充足，所以我加大了所有砖的最大生产量，最后结果形式比较完美的符合人工排产（比如每天应该产的量和人工表一样），但是我的时间更短，因为人工排产将不同砖的时间错开生产了，这样应该是有利于减负的，因为计算机不好考虑在真实情况下的排产，它所提供的只是一个**最优的理想模型**，但是沿用我对第一个模型的理解，我理性认为我的结果是好的







